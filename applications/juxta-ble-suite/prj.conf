# JUXTA BLE Suite Application Configuration
# Optimized for nRF52820 memory constraints (32KB RAM)

# Enable Bluetooth Low Energy (minimal configuration)
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_CENTRAL=y
CONFIG_BT_DEVICE_NAME="JUXTA-SUITE"

# BLE scanning configuration (minimal)
CONFIG_BT_SCAN_AND_INITIATE_IN_PARALLEL=y
CONFIG_BT_CTLR_SDC_ALLOW_PARALLEL_SCANNING_AND_INITIATING=y

# BLE memory optimization
CONFIG_BT_GATT_DYNAMIC_DB=n
CONFIG_BT_GATT_SERVICE_CHANGED=n
CONFIG_BT_ATT_PREPARE_COUNT=0
CONFIG_BT_BUF_ACL_RX_SIZE=27
CONFIG_BT_BUF_ACL_TX_SIZE=27
CONFIG_BT_L2CAP_TX_MTU=23
CONFIG_BT_MAX_CONN=1
CONFIG_BT_DEVICE_APPEARANCE=0
CONFIG_BT_DEVICE_NAME_DYNAMIC=n
CONFIG_BT_BUF_EVT_RX_COUNT=2
CONFIG_BT_BUF_EVT_DISCARDABLE_COUNT=1
CONFIG_BT_BUF_CMD_TX_COUNT=2

# Enable GPIO for LED control and magnet sensor
CONFIG_GPIO=y

# Enable SPI for accelerometer
CONFIG_SPI=y
CONFIG_SPI_NRFX=y

# Minimal logging to save memory
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=1
CONFIG_LOG_BUFFER_SIZE=256

# Disable RTT to save memory
CONFIG_USE_SEGGER_RTT=n
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n

# Reduced stack sizes (within valid ranges)
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1024
CONFIG_MAIN_STACK_SIZE=1024
CONFIG_BT_RX_STACK_SIZE=1024
CONFIG_BT_HCI_TX_STACK_SIZE=1024
CONFIG_HEAP_MEM_POOL_SIZE=2048

# Enable necessary subsystems
CONFIG_ENTROPY_GENERATOR=y
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# Disable ADC (not needed)
CONFIG_ADC=n
CONFIG_ADC_NRFX_SAADC=n

# Memory optimization
CONFIG_NO_OPTIMIZATIONS=n
CONFIG_SIZE_OPTIMIZATIONS=y 